# Momentum
`Momentum` is a widget that needs to be on the root of your app. It holds all the dependencies and configuration to be reused down the tree and also for configurations.

```dart
void main() {
  runApp(
    Momentum(
      // child: ...,
      // controllers: [...],
      // ...,
    ),
  );
}
```

## Constructor Parameters

- `child` *@required* - The base or main entry widget for the app. This is typically `MyApp()`.
  ```dart
    Momentum(
      child: MyApp(),
      // controllers: [...],
      // ...,
    ),
  ```

<hr>

- `controllers` *@required* - This is where you instantiate all `MomentumController`. All controllers listed here will be used down the tree in both widgets and in other controllers as well.
  ```dart
    Momentum(
      // child: ...,
      controllers: [
        ExampleControllerA(),
        ExampleControllerB(),
        ExampleControllerC(),
        // ...
      ],
      // ...,
    ),
  ```

<hr>

- `services` *@optional* - This is where you instantiate all `MomentumServices`. All services listed here will be used down the tree inside widgets and inside controllers as well.
  ```dart
    Momentum(
      // child: ...,
      // controllers: [...],
      services: [
        ApiService(),
        DatabaseService(),
        SomeService(),
      ],
    ),
  ```

<hr>

- `appLoader` *@optional* - Display custom loader widget that is used for awaiting all asynchronous initializers in your app before the `child` gets actually displayed. It's like a splash screen.
  ```dart
    Momentum(
      // child: ...,
      // controllers: [...],
      appLoader: MyAppLoaderWidget(),
    ),
  ```

<hr>

- `lazy` *@optional* - If set to `true`, all controllers will be lazy loaded. Defaults to `false`.
  ```dart
    Momentum(
      // child: ...,
      // controllers: [...],
      lazy: true,
    ),
  ```

<hr>

- `maxTimeTravelSteps` *@optional* - Configure time travel feature. If value is greater than `1`, time travel feature will be enabled, otherwise it is disabled. Maximum value is `250` steps. Defaults to `1`.
  ```dart
    Momentum(
      // child: ...,
      // controllers: [...],
      maxTimeTravelSteps: 50, // 50 undo-redo steps only.
    ),
  ```

<hr>

- `persistSave` *@optional* - A function parameter for saving or persisting state values using any storage provider. `key` and `value` are automatically generated by momentum. `BuildContext` is also provided so if your storage provider requires context, you can easily use it. This is a `Future<bool>` but you can use synchronous code here, just be sure that you return a bool value indicating whether key and value was saved successfully. `value` is a json representation of your model.
  ```dart
    Momentum(
      // child: ...,
      // controllers: [...],
      persistSave: (context, key, value) async {
        // save "key" and "value" somewhere.
        var sharedPref = SharedPreferences.getInstance();
        var success = await sharedPref.setString(key, value);
        return success;
      },
    ),
  ```

<hr>

- `persistGet` *@optional* - A function parameter for getting persisted state values using any storage provider. `key` is automatically generated by momentum. `BuildContext` is also provided so if your storage provider requires context, you can easily use it. This is a `Future<String>` but you can use synchronous code here. In the example code below,  `valueString` is a json representation of your model and momentum will automatically parse it.
  ```dart
    Momentum(
      // child: ...,
      // controllers: [...],
      persistGet: (context, key) async {
        // get data using the "key" provided.
        var sharedPref = SharedPreferences.getInstance();
        var valueString = sharedPref.getString(key);
        return valueString;
      },
    ),
  ```

<hr>

- `onResetAll` *@optional* - A function parameter for overriding `Momentum.resetAll(context)` method. You can use this to execute some logic before actually resetting all controllers.
  ```dart
    Momentum(
      // child: ...,
      // controllers: [...],
      onResetAll: (context, resetAll) async {
        var confirmed = await showDialog<bool>(context: context, builder: ...);
        if (confirmed) {
          // call the original resetAll method.
          resetAll(context);
        }
      },
    ),
  ```

<hr>

- `enableLogging` *@optional* - Whether to enable or disable logging for all controllers. Defaults to `false`.
  ```dart
    Momentum(
      // child: ...,
      // controllers: [...],
      enableLogging: true, // enable logging for all controllers.
    ),
  ```

<hr>

- `minimumBootstrapTime` *@optional* - Forces the app to have a minimum set of delay before `child` will be displayed. It will displayed `appLoader` until the minimum time specified finishes. If asynchronous initializers completed longer that specified here, this parameter is ignored. This is in milliseconds. Defaults to `0`.
  ```dart
    Momentum(
      // child: ...,
      // controllers: [...],
      minimumBootstrapTime: 3000, // minimum of 3 seconds loading.
    ),
  ```

<hr>

## Methods

- `.controller<T>(...)` - Get a specific controller of type `T`. It requires context so you can only call this insides widgets.
  ```dart
    @override
    Widget build(BuildContext context) {
      var exampleController = Momentum.controller<ExampleController>(context);
      return Scaffold(...);
    }
  ```

<hr>

- `service<T>(...)` - Get a specific service of type `T`. It requires context so you can only call this insides widgets.
  ```dart
    @override
    Widget build(BuildContext context) {
      var exampleService = Momentum.service<ExampleService>(context);
      return Scaffold(...);
    }
  ```

<hr>

- `restart(...)` - Restart momentum app with new momentum instance. Context is required.
  ```dart
    @override
    Widget build(BuildContext context) {
      return Scaffold(
        ...
          ...
            onPressed: () {
              Momentum.restart(context, momentum());
            },
      );
    }
  ```

<hr>

- `resetAll(...)` - Reset all controllers and their models. This will set all the models back to their initial values.
  ```dart
    @override
    Widget build(BuildContext context) {
      return Scaffold(
        ...
          ...
            onPressed: () {
              Momentum.resetAll(context);
            },
      );
    }
  ```

<hr>
